<div class="row p-3 border bg-light-grey rounded">
  <div class="col-12">
    <form #scraperForm="ngForm" (ngSubmit)="scrape()">
      <div class="input-group">
        <input
          placeholder="https://your-url-here.com"
          pattern="^(https?://).*"
          required
          [(ngModel)]="url"
          #url_="ngModel"
          class="form-control"
          name="url"
        />
        <button class="btn btn-green" type="submit">Go</button>
      </div>
      <div *ngIf="url_.invalid && (name.dirty || name.touched)" class="py-2">
        <div *ngIf="url_.errors.required">URL is required.</div>
        <div *ngIf="url_.errors.pattern">Not a valid url</div>
      </div>
    </form>
  </div>
</div>

<ng-container *ngIf="result; else noResult">
  <ng-container *ngIf="result.success; else scrapeFailed">
    <ng-container *ngIf="result.svgs.length > 0; else noSVGs">
      <div
        #svgRow
        class="row my-4 p-3 border bg-light-grey rounded"
        *ngFor="let svg of result.svgs; let i = index"
      >
        <div class="col-12 col-lg-8">
          <div class="svg-wrapper" [innerHTML]="getSVG(svg)"></div>
        </div>
        <div
          class="col-12 col-lg-4 d-flex align-items-center justify-content-end"
        >
          <button class="btn btn-purple me-2" (click)="invert(svgRow)">
            Invert Background
          </button>
          <a [href]="download(svg)" download="svg-{{ i }}.svg">
            <button class="btn btn-blue">Download</button>
          </a>
        </div>
      </div>
    </ng-container>
    <ng-template #noSVGs>
      <div class="row my-4 p-3 border bg-light-grey rounded">
        <div class="col-12">No SVGs where found</div>
      </div>
    </ng-template>
  </ng-container>

  <ng-template #scrapeFailed>
    <div class="row my-4 p-3 border bg-light-grey rounded">
      <div class="col-12">Error scraping website</div>
    </div>
  </ng-template>
</ng-container>

<ng-template #noResult>
  <div class="row my-4 p-3 border bg-light-grey rounded">
    <div class="col-12">Enter a URL to begin</div>
  </div>
</ng-template>
